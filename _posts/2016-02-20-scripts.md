---
layout: post
title: Sample scripts
---

1. find file

   ```bash
   $ find -L /path/to/search -type f -iname "*filename*"
   ```

2. bulk rename

   ```bash
   a=1
   for i in *.jpg; do
     new=$(printf "%04d.jpg" "$a") #04 pad to length of 4
     mv -- "$i" "$new"
     let a=a+1
   done
   ```

3. number range

   ```bash
   # -w means equal width
   $ seq -w 5 20
   ```

4. Check system ports

   ```bash
   $ netstat -npatu
   ```
5. Soft/symbolic link (symlink) points to file's directory entry while hard link points to file's inode. No matter of symlink or hard link, both are real but special files.

   When delete a symlink file, the orginal file is not touched. However, to delete a hard link file, the original file's hard link references count will be decreased by 1. If the final count equal to 0, then the original file is deleted as well.
6. Encoding conversion

   Charset  is  a  set of *character* entities while encoding is its representation in the terms of *bytes* and *bits*.  In Enca, the word encoding means the same as *representation of text*, i.e. the relation between sequence of character entities constituting the text and sequence of bytes (bits) constituting the file.
   
   ```bash
   $ enca/file filename, detect encoding
   $ enconv filename, convert to *locale*
   $ enconv/enca -x gb2312 filename, convert to specified encoding
   ```

   1. *enca/enconv* is a tool superior to *iconv*.
   2. It does NOT make backup.
7. CR-LF/LF conversion
   1. CR: Carriage Return, '\r', '\o015', '\xd'.
   2. LF: Line Feeding, '\n', '\o12', '\xa'.
   3. Some DOS files are ended with CR-LF, while others are LF-CR.

   Detect line ending:
   
   ```bash
   $ hexdump -c input.file, detect line ending
   $ sed -n l input.file
   $ file input.file
   ```

   *app-text/dos2unix*:
   
   ```bash
   $ dos2unix/unix2dos -b input.file, '-b' makes a backup
   ```

   *perl*:
   
   ```bash
   $ perl -pi -e 's/\r//g' input.file
   $ perl -pi -e 's/\n/\r\n/g' input.file
   ```

   *sed*:
   
   ```bash
   $ sed -i 's/\r//' input.file
   $ sed -i 's/$/\r/' input.file
   ```

   *tr*:
   
   ```bash
   $ tr -d '\r' < input.file > output.file, cannot do it the other way round
   ```

   *nano*:

   >Type Ctrl-O and before confirming, type Alt-D (DOS) or Alt-M (Mac) to change the format.
   
   Refer to [remove CRs from CR-LF line terminators](http://mywiki.wooledge.org/BashFAQ/052).